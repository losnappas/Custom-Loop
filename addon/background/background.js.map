{"version":3,"sources":["webpack:///webpack/bootstrap d8143622a851ca534195","webpack:///./src/background.js","webpack:///./src/fancyTimeFormat.js"],"names":["displayStart","displayEnd","timeListener","info","tab","browser","tabs","executeScript","file","frameId","then","sendMessage","id","mediaSrcURL","srcUrl","command","menuItemId","catch","err","console","error","uiUpdate","response","start","end","contextMenus","update","title","create","contexts","onClicked","addListener","runtime","onMessage","fancyTimeFormat","time","hrs","mins","secs","ret"],"mappings":"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","file":"addon/background/background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d8143622a851ca534195","import fancyTimeFormat from './fancyTimeFormat'\r\n\r\n//TO-DO: time display bugs out on iframes.\r\nvar displayStart=\"not set\";\r\nvar displayEnd=\"not set\";\r\n\r\n\r\nvar timeListener = (info, tab) => {\r\n\t// console.log('timeListener', info, tab);\r\n\r\n\t//HOW TO not require <\"all_urls\">:\r\n\t//execute the script, then inside the script compare media srcUrls to find the correct element.\r\n\tbrowser.tabs.executeScript({\r\n\t\tfile: \"/content_scripts/html5looper.js\",\r\n\t\tframeId: info.frameId\r\n\t})\r\n\t.then( () => browser.tabs.sendMessage(tab.id, { mediaSrcURL: info.srcUrl, command: info.menuItemId } ) )\r\n\t.catch( (err)=> console.error(\"reloadListener error:\", err)\t);\t\r\n\r\n}\r\n\r\n\r\nvar uiUpdate = response => {\r\n\t// console.log(\"THEN\", response);\r\n\tdisplayStart = fancyTimeFormat(response.start);\r\n\tdisplayEnd = fancyTimeFormat(response.end);\r\n\r\n\t//update the tooltip\r\n\tbrowser.contextMenus.update(\"current\", {title: displayStart+\"-\"+displayEnd});\r\n}\r\n\r\nbrowser.contextMenus.create({\r\n\tid: \"current\",\r\n\ttitle: displayStart + \"-\" + displayEnd,\r\n\tcontexts: [\"audio\", \"video\"]\r\n});\r\n\r\n\r\nbrowser.contextMenus.create({\r\n\tid: \"looperstart\",\r\n\ttitle: \"Select start\",\r\n\tcontexts: [\"audio\", \"video\"]\r\n});\r\nbrowser.contextMenus.create({\r\n\tid: \"looperend\",\r\n\ttitle: \"Select end\",\r\n\tcontexts: [\"audio\", \"video\"]\r\n});\r\nbrowser.contextMenus.create({\r\n\tid: \"looperreset\",\r\n\ttitle: \"Reset\",\r\n\tcontexts: [\"audio\", \"video\"]\r\n});\r\nbrowser.contextMenus.create({\r\n\tid: \"looperadvanced\",\r\n\ttitle: \"Advanced\",\r\n\tcontexts: [\"audio\", \"video\"]\r\n});\r\n\r\n\r\nbrowser.contextMenus.onClicked.addListener(timeListener);\r\n\r\nbrowser.runtime.onMessage.addListener(uiUpdate);\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/background.js","//duplicate code from background.js o_O\r\nconst fancyTimeFormat = function(time)\r\n{   \r\n    // Hours, minutes and seconds\r\n    // ~~ === Math.floor\r\n    time = ~~time\r\n    var hrs = ~~(time / 3600)\r\n    var mins = ~~((time % 3600) / 60)\r\n    var secs = time % 60\r\n\r\n    // Output like \"1:01\" or \"4:03:59\" or \"123:03:59\"\r\n    var ret = \"\"\r\n\r\n    if (hrs > 0) {\r\n        ret += \"\" + hrs + \":\" + (mins < 10 ? \"0\" : \"\")\r\n    }\r\n\r\n    ret += \"\" + mins + \":\" + (secs < 10 ? \"0\" : \"\")\r\n    ret += \"\" + secs\r\n    return ret\r\n}\r\n\r\nexport default fancyTimeFormat;\n\n\n// WEBPACK FOOTER //\n// ./src/fancyTimeFormat.js"],"sourceRoot":""}