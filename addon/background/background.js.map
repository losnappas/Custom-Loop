{"version":3,"sources":["webpack:///webpack/bootstrap 7d7d3258268fc5db7a39","webpack:///./src/background.js","webpack:///./src/fancyTimeFormat.js"],"names":["displayStart","displayEnd","timeListener","info","tab","browser","tabs","executeScript","file","frameId","then","sendMessage","id","mediaSrcURL","srcUrl","command","menuItemId","catch","err","console","error","uiUpdate","response","start","end","contextMenus","update","title","create","contexts","onClicked","addListener","runtime","onMessage","fancyTimeFormat","time","hrs","mins","secs","ret"],"mappings":"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","file":"addon/background/background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7d7d3258268fc5db7a39","import fancyTimeFormat from './fancyTimeFormat'\n\n//TO-DO: time display bugs out on iframes.\nvar displayStart=\"not set\";\nvar displayEnd=\"not set\";\n\n\nvar timeListener = (info, tab) => {\n\t// console.log('timeListener', info, tab);\n\n\t//HOW TO not require <\"all_urls\">:\n\t//execute the script, then inside the script compare media srcUrls to find the correct element.\n\tbrowser.tabs.executeScript({\n\t\tfile: \"/content_scripts/html5looper.js\",\n\t\tframeId: info.frameId\n\t})\n\t.then( \n\t\t() => browser.tabs.sendMessage(\n\t\t\ttab.id,\n\t\t \t{ \n\t\t \t\tmediaSrcURL: info.srcUrl,\n\t\t \t \tcommand: info.menuItemId \n\t\t \t},\n\t\t  \t{ \n\t\t  \t\tframeId: info.frameId \n\t\t  \t} \n\t\t  ) \n\t)\n\t.catch( (err)=> console.error(\"reloadListener error:\", err)\t);\t\n\n}\n\n\nvar uiUpdate = response => {\n\t// console.log(\"THEN\", response);\n\tdisplayStart = fancyTimeFormat(response.start);\n\tdisplayEnd = fancyTimeFormat(response.end);\n\n\t//update the tooltip\n\tbrowser.contextMenus.update(\"current\", {title: displayStart+\"-\"+displayEnd});\n}\n\nbrowser.contextMenus.create({\n\tid: \"current\",\n\ttitle: displayStart + \"-\" + displayEnd,\n\tcontexts: [\"audio\", \"video\"]\n});\n\n\nbrowser.contextMenus.create({\n\tid: \"looperstart\",\n\ttitle: \"Select start\",\n\tcontexts: [\"audio\", \"video\"]\n});\nbrowser.contextMenus.create({\n\tid: \"looperend\",\n\ttitle: \"Select end\",\n\tcontexts: [\"audio\", \"video\"]\n});\nbrowser.contextMenus.create({\n\tid: \"looperreset\",\n\ttitle: \"Reset\",\n\tcontexts: [\"audio\", \"video\"]\n});\nbrowser.contextMenus.create({\n\tid: \"looperadvanced\",\n\ttitle: \"Advanced\",\n\tcontexts: [\"audio\", \"video\"]\n});\n\n\nbrowser.contextMenus.onClicked.addListener(timeListener);\n\nbrowser.runtime.onMessage.addListener(uiUpdate);\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/background.js","//duplicate code from background.js o_O\nconst fancyTimeFormat = function(time)\n{   \n    // Hours, minutes and seconds\n    // ~~ === Math.floor\n    time = ~~time\n    var hrs = ~~(time / 3600)\n    var mins = ~~((time % 3600) / 60)\n    var secs = time % 60\n\n    // Output like \"1:01\" or \"4:03:59\" or \"123:03:59\"\n    var ret = \"\"\n\n    if (hrs > 0) {\n        ret += \"\" + hrs + \":\" + (mins < 10 ? \"0\" : \"\")\n    }\n\n    ret += \"\" + mins + \":\" + (secs < 10 ? \"0\" : \"\")\n    ret += \"\" + secs\n    return ret\n}\n\nexport default fancyTimeFormat;\n\n\n// WEBPACK FOOTER //\n// ./src/fancyTimeFormat.js"],"sourceRoot":""}